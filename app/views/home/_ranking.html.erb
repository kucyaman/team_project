<% if @user_log_ranks.empty? %>
  <div class="container text-center my-5">
    „Åæ„Å†Ë™∞„ÇÇÊäïÁ®ø„Åó„Å¶„Å™„ÅÑ„Åè„Åæüêª
  </div>
<% else %>
  <div class="container text-center">
    <h4 class="mb-2">Á¥ØË®àÊäïÁ®ø„É≠„Ç∞Êï∞</h4>
  </div>
  <div class = "row mx-auto border border-2 rounded-3 p-2 mb-5 col-lg-11">
    <table class="table text-center">
      <tr>
        <th>„É©„É≥„ÇØ</th>
        <th>„É¶„Éº„Ç∂„ÉºÂêç</th>
        <th>ÊäïÁ®ø„É≠„Ç∞Êï∞</th>
      </tr>
      <% current_rank = 1 %>
      <% current_count = nil %>
      <% grouped_users = [] %>
      <% @user_log_ranks.each do |rank| %>
                  <% if current_count != rank.curriculum_logs.count %>
                          <% if grouped_users.any? %>
                            <tr>
                              <td class="align-middle">Á¨¨<%= current_rank %>‰Ωç</td>
                              <td class="align-middle">
                                <% grouped_users.each do |user| %>
                                  <div class="m-1"><%= user.profile.name %>„Åï„Çì</div>
                                <% end %>
                              </td>
                              <td class="align-middle"><%= current_count %></td>
                            </tr>
                            <% current_rank += 1 %>
                            <% if current_rank == 6 %>
                                  <break>
                            <% end %>
                            <% grouped_users = [rank] %>
                          <% else %>
                            <% grouped_users << rank %>
                          <% end %>
                  <% else %>
                    <% grouped_users << rank %>
                  <% end %>
                  <% current_count = rank.curriculum_logs.count %>
      <% end %>
    </table>
  </div>


  <% if @user_study_time.empty? %>
    <div class="container text-center my-5">
      Êò®Êó•„ÅØË™∞„ÇÇÂãâÂº∑„Åó„Å¶„Å™„ÅÑ„Åè„Åæüêª
    </div>
  <% else %>
    <div class="container text-center">
      <h4 class="mb-2">Êò®Êó•„ÅÆÂãâÂº∑ÊôÇÈñì</h4>
    </div>
    <div class = "row mx-auto border border-2 rounded-3 p-2 mb-5 col-lg-11">
      <table class="table text-center">
        <tr>
          <th>„É©„É≥„ÇØ</th>
          <th>„É¶„Éº„Ç∂„ÉºÂêç</th>
          <th>ÂãâÂº∑ÊôÇÈñì</th>
        </tr>
        <% current_rank = 1 %>
        <% previous_total_study_minutes = nil %>
        <% grouped_users = [] %>
        <% @user_study_time.each do |rank| %>
                  <% if previous_total_study_minutes != rank.total_study_minutes %>
                        <% if grouped_users.any? %>
                          <tr>
                            <td class="align-middle">Á¨¨<%= current_rank %>‰Ωç</td>
                            <td class="align-middle">
                              <% grouped_users.each do |user| %>
                                <div class="m-1"><%= user.profile.name %>„Åï„Çì</div>
                              <% end %>
                            </td>
                            <td class="align-middle"><%= previous_total_study_minutes / 60 %>ÊôÇÈñì<%= previous_total_study_minutes % 60 %>ÂàÜ</td> 
                          </tr>
                          <% current_rank += 1 %>
                          <% if current_rank == 6 %>
                                  <break>
                            <% end %>
                          <% grouped_users = [rank] %>
                        <% else %>
                          <% grouped_users << rank %>
                        <% end %>
                  <% else %>
                    <% grouped_users << rank %>
                  <% end %>
          <% previous_total_study_minutes = rank.total_study_minutes %>
        <% end %>
      </table>
    </div>
  <% end %>
<% end %>